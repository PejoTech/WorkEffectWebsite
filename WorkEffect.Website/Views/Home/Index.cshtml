@model List<Section>

@functions {
    public string JoinContentAndLayout(Section section)
    {
        if (!string.IsNullOrWhiteSpace(section.Image))
        {
            var imagePath = string.Concat("../Content/Images/", section.Image);
            return string.Format(section.Layout.HtmlContainer, section.Name.Replace(" ", "") + section.Id, imagePath, section.Content);
        }

        return string.Format(section.Layout.HtmlContainer, section.Name.Replace(" ", "") + section.Id, section.Content);
    }
}

@using WorkEffect.Website.Models
@foreach (var item in (List<Section>)ViewBag.Sections)
{
    @Html.Raw(JoinContentAndLayout(item))
}